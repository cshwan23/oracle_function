# oracle_function
오라클 내장함수


    ------------------------------------------
    --문1 employee 테이블에서 모든 칼럼의 데이터를 검색하면?
    ------------------------------------------
    select emp_no, dep_no, jikup, salary, hire_date, jumin_num, phone_num from employee;
    select * from  employee;

    ------------------------------------------
    --<문2> employee 테이블에서 select emp_no, dep_no, jikup, salary, hire_date 칼럼의 데이터를 검색하면?
    ------------------------------------------
    select emp_no, dep_no, jikup, salary, hire_date from employee;

    ------------------------------------------
    --<문3> employee 테이블에서 select emp_no, dep_no, jikup, salary, hire_date 을 검색하면서
    -- 컬럼의 별칭을 사원번호, 직원명, 직급, 연봉, 입사일로 하고 연봉에 만원이란 문자를 붙여 검색하면? (as 생략 가능)
    ------------------------------------------
    select  emp_no "직원번호"
            , emp_name "직원명"
            , jikup "직급"
            , salary||'만원'as "연봉"
            , hire_date as "입사일"
    from employee;

    ------------------------------------------
    --<문4>** employee 테이블에서 직원명, 직급, 연봉, 세금을 검색하면? (세금은 연봉의 12%)
    ------------------------------------------
    select
              emp_name as "직원명"
            , jikup as "직급"
            , salary||'만원' as "연봉"
            , salary*0.12||'만원' as "세금"
    from employee;

    ------------------------------------------
    --<문5> employee 테이블에서 직원명, 직급, 연봉, 실수령액을 검색하면? (세금은 연봉의 12%)
    ------------------------------------------
    select
              emp_name as "직원명"
            , jikup as "직급"
            , salary||'만원' as "연봉"
            , salary*0.88||'만원' as "실수령액"
    from employee;

    ------------------------------------------
    --<문6> employee 테이블에서 직급을 중복 없이 검색하면?(방법 1.distinct, 2.unique 함수)
    ------------------------------------------
    select distinct jikup as "직급" from employee;
    select unique(jikup) as "직급" from employee;

    ------------------------------------------
    --<문7>** employee 테이블에서 부서번호와 직급을 중복없이 검색하고 오름차순으로 정렬하려면?
    ------------------------------------------
    select distinct dep_no "부서번호", jikup as "직급" from employee order by 1 asc;
    -- select * from user_users;


    ------------------------------------------
    --<문8>*** employee 테이블에서 연봉이 3000 이상인 직원을 검색하면?
    ------------------------------------------
        -- 행 골라내는 키워드 = where
        -- where 뒤에는 행을 골라내는 조건이 나온다.
        -- 오라클에선 == 이 없다.

    select  * from employee where salary>=3000;
    select  * from employee where salary=3000;

    ------------------------------------------
    --<문9>** employee 테이블에서 연봉 오름차순으로 검색하면?
    ------------------------------------------
        --order by 는 행의 순서를 바꾸는 키워드다.
        --<참고> 만약 내림차순이라면 asc 대신 desc를 사용한다.
        --<참고> asc 생략이 가능하다.
        --<참고> order by 뒤에는 [칼럼명] 또는 [칼럼순서번호]또는 [알리아스]가 나온다
    select * from employee order by salary asc;
    select * from employee order by 5 asc;


    ------------------------------------------
    --<문10>** employee 테이블에서 부서번호 오름차순 유지하면서 연봉 내림차순으로 검색하면?
    ------------------------------------------
        --<주의>아래 정답은 asc가 생략된 것이다.
        -- 그러다보니 맨 뒤에 desc가 앞에 나오는 모든 컬럼에 영향을 준 것처럼 보이나 아니다.
        ---------------------------------------
    select *from employee order by dep_no asc, salary desc;

    select *from employee order by dep_no , salary desc;

    ------------------------------------------
    --<명심> 고객의 요구사항을 보고 select 문을 작성하는 것도 중요하지만 이미 작성된
    --      select 문을 보고 고객의 요구 사항을 알아내는 것도 중요하다.
    ------------------------------------------

    --mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
    -- 함수 문제
    --mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
    ------------------------------------------
    --<문제11> concat, initcap, lower, upper
    ------------------------------------------
    select
        concat('Romeo','Juliet')
        ,concat('로미오', '줄리엣')
        ,'로미오'||'줄리엣'
        ,initcap('abCDefGHi')
        ,initcap('i am a boy')
        ,lower('abcdeFG')
        ,upper('abcdeFG')
    from dual;
    ------------------------------------------
    -- 듀얼은 존재하지 않는 더미 테이블, 테이블과 관계없이 출력시에만 사용한다.
    ------------------------------------------
    --<문제12> lpad, rpad
    ------------------------------------------
    select
        lpad('abc',7,' '),  --> abc (좌측에 공백 4개 있음)
        lpad('abc',7,'#'),  --> ####abc
        lpad('abc',7,'s'),  --> ssssabc
        rpad('abc',7,' '),  --> abc (우측에 공백 4개 있음)
        rpad('abc',7,'#'),  --> abc####
        rpad('abc',7,'s')   --> abcssss
    from dual;
    ------------------------------------------
    --<문제13> trim, ltrim, rtrim, length
    ------------------------------------------
    select
        trim(leading 'A' from 'AABBCCDD'),  --from 절 뒤의 문자열에서 맨 앞이 A인 놈을 제거하고 리턴
        trim(trailing 'D' from 'AABBCCDD'), --from 절 뒤의 문자열에서 맨 뒤가 D인 놈을 제거하고 리턴
        trim(both 'A' from 'AABBCCDD'),     --from 절 뒤의 문자열에서 맨 앞뒤이 A인 놈을 제거하고 리턴
        trim('A' from 'AABBCCDD'),          --from 절 뒤의 문자열에서 맨 앞뒤이 A인 놈을 제거하고 리턴
        ltrim('ABCDEFG', ' '),              --문자열에서 맨 왼쪽의 공백을 계속 제거하고 리턴
        ltrim('ABCDEFG', 'AB'),             --문자열에서 맨 왼쪽의 A 또는 B를 제거하고 리턴
        ltrim('ABCDEFG', 'BC'),             --문자열에서 맨 왼쪽의 B 또는 C를 제거하고 리턴
        rtrim('ABCDEFG', ' '),              --문자열에서 맨 오른쪽의 공백을 계속 제거하고 리턴
        rtrim('ABCDEFG', 'FG'),             --문자열에서 맨 오른쪽의 F 또는 G를 제거하고 리턴
        rtrim('ABCDEFG', 'EF'),             --문자열에서 맨 오른쪽의 E 또는 F를 제거하고 리턴
        trim('ABCDEFG') ,                   --문자열에서 맨 왼쪽,오른쪽의 공백 제거하고 리턴 (제일많이쓰임)
        length(trim('ABCDEFG'))             --문자열에서 맨 왼쪽,오른쪽의 공백 제거하고 문자열의 길이 리턴
    from dual;


    ------------------------------------------
    --<문제14> 'You are not alone' 문자열에서 원하는 문자만 낚아채고 싶을 때(substr함수**)
    ------------------------------------------
        --substr(낚아챌대상,순서번호,낚아챌문자개수)
        ------------------------------------------
        --substr(낚아챌대상,순서번호) => 순서번호부터 뒤 끝까지 전부다 낚아챔
        ------------------------------------------
        --substr(낚아챌대상,-순서번호,낚아챌문자개수) => 맨뒤에서부터 순서번호부터 낚아챔
        ------------------------------------------
        --substr(낚아챌대상, 0 ,낚아챌문자개수) => 순서번호가 0이면 오라클이 1로 바꿔준다.
        ------------------------------------------
        --substr(낚아챌대상, 순서번호 ,0) => 낚아챌문자개수가 0이면 null이 출력된다.
        ------------------------------------------
    select
        substr('You are not alone',9,3),   --> not
        substr('You are not alone',5),     --> are not alone
        substr('You are not alone',13,2),  --> al
        substr('You are not alone',-5,2),  --> al
        substr('You are not alone',-5,0)   --> null
    from dual;

    ------------------------------------------
    --<문제15>문자열을 다른 문자로 바꾸고싶을때 & 제거하고싶을때 (replace 함수)
    ------------------------------------------
        -- replace(찾을대상, 바꿀대상, 대체될데이터)
        --------------------------------------
        -- replace(찾을대상, 바꿀대상) -> ''길이가 없는걸로 대체하니까 제거의 의미가 된다.
        --------------------------------------
    -- replace(찾을대상)
    select
        replace('You are not alone', 'You','We'),   --> We are not alone
           -- 아래 셋다 제거의 의미
        replace('You are not alone', 'You'),        --> are not alone
        replace('You are not alone', 'You', null),  --> are not alone
        replace('You are not alone', 'You', '')     --> are not alone

    from dual;
    ------------------------------------------
    --translate (찾을대상, 바꿀대상, 대체될데이터)
    ------------------------------------------
        -- 바꿀대상의 순서번호와 대체될데이터의 순서번호와 매칭해서 대체된다.
        -- 'You' - 'We'
        -- Y -> W
        -- o -> e
        -- u -> '' 없으니 제거
    select
        translate('You are not alone','You', 'We')  --> We are net alene
    from dual;

    ------------------------------------------
    --<문제16> 아스키코드값을 알고 싶을 때 (ascii)
    ------------------------------------------
        --instr (= js에서 indexOf랑 같음)
        ------------------------------------------
    select
        ascii('A'),
        ascii('a'),
        ascii('AB'),
        instr('Every sha-la-la-la Every wo-wo-wo', 'la'),
        instr('Every sha-la-la-la Every wo-wo-wo', 'la',1),
        instr('Every sha-la-la-la Every wo-wo-wo', 'la',1,2)
    from dual;

    ------------------------------------------
    --<문제17> **** sign, round, trunc, ceil, floor, power, sqrt, mod
    ------------------------------------------
        -- sign  : 양수,음수,0 인지 확인하는 함수
        -- round : 반올림 하는 함수
        -- trunc : 무조건 버림
        -- ceil : 얘보다 크면서 가장 가까운 정수
        -- floor : 얘보다 작으면서 가장 가까운 정수
        -- power(n,m) : n의 m승(n을 m번 곱해라)
        -- sqrt(n) : 루트 n
        -- mod(n,m) : n을 m으로 나눈후 나머지 값
    select
        sign(32),   -->1    sign(양의수)면 1리턴.
        sign(-32),  -->1    sign(음의수)면 -1리턴.
        sign(0),    -->1    sign(0)이면 0리턴.
    ---------------------------------------------------------------------------------
        round(0.62345678, 0),       -->1       round(숫자, 반올림한 후 보여지는 소수점 자리수)
        round(0.12345678, 0),       -->0       소수점 0+1번째자리에서 반올림해서 보여줘
        round(0.12345678, 3),       -->0.123   소수점3+1번째 자리에서 반올림해서 보여줘
        round(0.12345678, 4),       -->0.1235  소수점4+1번째 자리에서 반올림해서 보여줘
        round(1234.12345678, -2),   -->1200    정수 2째자리에서 반올림해서 보여줘.
    ---------------------------------------------------------------------------------
        trunc(1234.12345678, 0),    -->1234    소수점 0+1번째 자리를 버린후 보여줘라.
        trunc(1234.12345678, 2),    -->1234.12 소수점 2+1번째 자리를 버린후 보여줘라.
        trunc(1234.12345678, -2),   -->1200    정수 2번째부터 버린후 보여줘라.
    ---------------------------------------------------------------------------------
        ceil(1234.12345678),        -->1235
        ceil(0.12345),              -->1
    ---------------------------------------------------------------------------------
        floor(1234.12345678),       -->1234
        floor(0.12345),             -->0
    ---------------------------------------------------------------------------------
        power(3,2),                 -->9        3의2승(3을2번곱해라)
    ---------------------------------------------------------------------------------
        sqrt(2),                    -->1.414..  루트 2
    ---------------------------------------------------------------------------------
        mod(9,4)                    -->1        9를4로 나눴을 때의 나머지
    from dual;


    ------------------------------------------
    --<문제18> ******* 날짜 함수 ( 너무중요, DB 입장에서 날짜는 곧 돈이다.)
    ------------------------------------------
    -- 1. add_months
    ------------------------------------------
        -- to_date('날짜문자','날짜패턴') --> 날짜문자를 진짜 날짜로 바꿈
        ------------------------------------------
        -- add_months(날짜, 더해지는 개월수) => 리턴값 =날짜
        ------------------------------------------
    select
            ------------------------------------------
            -- Q. 2020년 10월 22일 기준 1개월 이후의 날짜는 언제냐?
            ------------------------------------------
            add_months(to_date('2020-10-22','YYYY-MM-DD'),1),

            ------------------------------------------
            -- Q. 2020년 1월 30일 기준 1개월 이후의 날짜는 언제냐?
            ------------------------------------------
            -- 2020년 2월 30일 이 없으므로 그달의 마지막날을 보여준다.
            add_months(to_date('2020-1-30','YYYY-MM-DD'),1),

            ------------------------------------------
            -- Q. 2020년 11월 30일 기준 1개월 이후의 날짜는 언제냐?
            ------------------------------------------
            -- 2020년 11월 30일은 11월의 마지막날이므로
            -- 한달 뒤인 12월의 마지막 날 즉 2020년 12월 31일을 보여준다.
            add_months(to_date('2020-11-30','YYYY-MM-DD'),1),

            ------------------------------------------
            -- Q. 오늘 부터 5개월 이후의 날짜는?
            ------------------------------------------
            -- sysdate 는 오늘 날짜를 의미함. 즉 현재 시스템 날짜를 의미함.
            add_months(sysdate,5)

    from dual;

    select

        ------------------------------------------
        -- Q. 오늘 날짜 부터 100일 이후 날짜는?
        ------------------------------------------
        sysdate+100 --> 날짜에 숫자를 더하면 일수만큼 더한 날짜가 나온다.

        ------------------------------------------
        -- Q. 나의 돌 날짜는?
        ------------------------------------------
        ,to_date('1990-02-03','YYYY-MM-DD')+100

        ------------------------------------------
        -- Q. 오늘 날짜에 20년 5개월 10일을 더한 후의 날짜는?
        ------------------------------------------
        ,add_months(sysdate+(365*20),5)+10
        ,add_months(sysdate,(12*20)+5)+10
        ,add_months(add_months(sysdate,12*20),5)+10

        ------------------------------------------
        -- Q. 태어난 날 이후 오늘까지 며칠이 흘렀을까?
        ------------------------------------------
         --날짜에서 날짜를 빼면 일수를 리턴한다.
         --오라클은 날짜에서 날짜를 빼는 전용함수가 없다. 그냥 빼면(-) 된다.
        ,sysdate-to_date('1990-02-03','YYYY-MM-DD')


        ------------------------------------------
        -- Q. 두 날짜의 차이를 일수가 아닌 월수로 구헤주는 함수
        ------------------------------------------
        -- 2. months_between
        ------------------------------------------
         --months_between(n,m) : n날짜-m날짜 두 날짜를 뺀 차이를 개월수로 리턴한다.
         -- <주의> 이때 리턴값은 날짜가 아니라 숫자다.
        ,months_between(sysdate ,to_date('1990-02-03','YYYY-MM-DD') )


        ------------------------------------------
        -- Q. 1990-02-03 이후 제일 빠른 월요일 날짜?
        ------------------------------------------
        -- 3. next_day(n,m)
        ------------------------------------------
        -- 특정 날짜(n) 이후로 특정요일(m)이 가장 빠른 날
        -- next_day(n,m) : n은 특정날짜, m은 요일숫자 (일요일은1 토요일은7)
        ,next_day(to_date('1990-02-03','YYYY-MM-DD'),2 )


        ------------------------------------------
        -- Q. 1990년 2월 3일이 속한 달의 마지막 날짜는 언제냐?
        ------------------------------------------
        -- 4. last_day
        ------------------------------------------
         --last_day(특정날짜) : 특정 날짜가 속한 달의 마지막 날짜를 구하는 함수
        ,last_day(to_date('1990-02-03','YYYY-MM-DD') )
        -- 이번달 마지막 날짜
        ,last_day(sysdate)

        ------------------------------------------
        -- Q. 오늘 날짜의 년도를 숫자로, 월을 숫자로, 일을 숫자로 출력하기
        ------------------------------------------
         -- 5. extract(n from m) : m의 특정날짜에서 n날짜 형식의 숫자로 구하는 함수
        ------------------------------------------
         --extract(year from 특정날짜)
         --extract(month from 특정날짜)
         --extract(day from 특정날짜)
        ,extract(year from sysdate )
        ,extract(month from sysdate )
        ,extract(day from sysdate )
         -- 다른 방법.
        ,to_number(to_char(sysdate,'YYYY'))
        ,to_number(to_char(sysdate,'MM'))
        ,to_number(to_char(sysdate,'DD'))


        ------------------------------------------
        -- Q. 오늘 날짜를 다양한 형태의 날짜문자로 바꾸기
        ------------------------------------------
        --    오늘 날짜를 년-월-일 로 출력하면 어떻게 해야하나?
        --             년-월 로 출력하면 어떻게 해야하나?
        --             년 으로 출력하면 어떻게 해야하나?
        --             일 로 출력하면 어떻게 해야하나?
        --             요일 로 출력하면 어떻게 해야하나?
        --             요일의 앞글자만(약어) 출력하려면 어떻게 해야하나?
        --             요일을 숫자로 출력하려면 어떻게 해야하나?(일-토,1-7이다)
        --             요일을 일본어로 출력하려면 어떻게 해야하나?
        --             요일을 영어로 출력하려면 어떻게 해야하나?
        --             분기로 출력하려면 어떻게 해야하나?
        --             (군대식) 시 분 초로 출력하려면 어떻게 해야하나?
        --             (사제식) 시 분 초로 출력하려면 어떻게 해야하나?
        --             (오전 오후 포함한)시 분 초로 출력하려면 어떻게 해야하나?
        ------------------------------------------
        ,to_char(sysdate,'YYYY-MM-DD')
        ,to_char(sysdate,'YYYY-MM')
        ,to_char(sysdate,'YYYY')
        ,to_char(sysdate,'DD')
        ,to_char(sysdate,'DAY')
        ,to_char(sysdate,'DY')
        ,to_char(sysdate,'D')
        ,to_char(sysdate,'DAY','NLS_DATE_LANGUAGE=Japanese')
        ,to_char(sysdate,'DAY','NLS_DATE_LANGUAGE=English')
        ,to_char(sysdate,'Q')
        ,to_char(sysdate,'YYYY/MM/DD HH24:MI:SS')
        ,to_char(sysdate,'YYYY/MM/DD HH:MI:SS')
        ,to_char(sysdate,'YYYY/MM/DD AM HH:MI:SS')

    from dual;

